<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OLYMPIAN | AXIOM 24</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root { --fire: #ff4500; --spark: #ffae00; --bio-low: #001a33; --bio-high: #00f2ff; --cyan-bloom: rgba(0, 255, 255, 0.15); --cyan-border: rgba(0, 255, 255, 0.4); --cyan-glow: 0 0 20px rgba(0, 255, 255, 0.3); }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; font-family: 'Courier New', monospace; color: white; overflow: hidden; }
        
        canvas#hurricaneCanvas { position: fixed; top: 0; left: 0; z-index: 0; pointer-events: none; }
        
        /* Landing Overlay */
        #landing-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: radial-gradient(circle, rgba(0,26,51,0.5) 0%, #000 100%);
            z-index: 5000; display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: opacity 1s ease;
        }
        #landing-prompt {
            color: var(--bio-high); font-size: 1.2rem; letter-spacing: 8px;
            text-shadow: 0 0 20px var(--bio-high); animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        header { position: relative; z-index: 100; height: 60px; display: none; opacity: 0; align-items: center; justify-content: space-between; padding: 0 20px; background: rgba(0,0,0,0.9); border-bottom: 1px solid var(--bio-high); }
        h1 { letter-spacing: 5px; color: var(--bio-high); text-shadow: 0 0 15px var(--bio-high); font-size: 0.9rem; }

        /* THE FIX: Grid height adjusted to stop above the footer zone */
        #store-grid { 
            position: relative; z-index: 5; display: none; opacity: 0;
            grid-template-columns: repeat(2, 1fr); gap: 15px; 
            width: 95%; margin: 15px auto 0 auto; 
            height: calc(100vh - 190px); /* Account for header + footer + 2mm gap */
            overflow-y: auto; scrollbar-width: none;
            padding-bottom: 20px;
        }

        /* 2mm Visual Stopper Gap (Red Circle Area) */
        .visual-stopper {
            height: 2mm;
            width: 100%;
            background: transparent;
            z-index: 10;
        }

        .card { 
            position: relative; background: rgba(0, 242, 255, 0.03); border: 1px solid rgba(0, 242, 255, 0.2);
            aspect-ratio: 0.8 / 1; cursor: pointer; display: flex; align-items: center; justify-content: center;
            box-shadow: inset 0 0 15px var(--bio-low); transition: 0.3s; backdrop-filter: blur(2px);
        }
        .card:hover { border-color: var(--bio-high); box-shadow: 0 0 20px var(--bio-high); }
        .card img { width: 85%; height: 85%; object-fit: contain; mix-blend-mode: screen; filter: drop-shadow(0 0 8px var(--bio-high)); }
        .grid-label { position: absolute; bottom: 0; width: 100%; background: rgba(0,26,51,0.9); font-size: 0.55rem; text-align: center; padding: 6px 0; color: var(--bio-high); border-top: 1px solid var(--bio-high); }

        /* THE FIX: Opaque Control Footer (Yellow Circle Area) */
        .control-footer {
            position: fixed; bottom: 0; width: 100%; height: 110px;
            background: #000; /* Solid black to prevent hoodie overlap */
            z-index: 150; 
            display: none; opacity: 0; flex-direction: column; align-items: center; justify-content: center;
            border-top: 1px solid var(--bio-high);
            box-shadow: 0 -10px 20px rgba(0,0,0,0.8);
        }

        #design-toggle { 
            position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
            padding: 10px 12px; background: rgba(0, 242, 255, 0.1); border: 1px solid var(--bio-high); 
            border-radius: 5px; color: var(--bio-high); cursor: pointer; display: flex; align-items: center; 
            gap: 8px; font-size: 0.6rem; text-transform: uppercase; z-index: 160;
        }

        /* Slider and Sector Display alignment */
        .slider-wrapper { width: 50%; margin-left: 120px; display: flex; flex-direction: column; align-items: center; }
        .sector-slider { width: 100%; accent-color: var(--bio-high); }
        #sector-display { font-size: 0.7rem; color: var(--bio-high); margin-bottom: 8px; letter-spacing: 2px; }

        /* Side-Cart & Modals */
        #side-cart { position: fixed; top: 0; right: -100%; width: 85%; max-width: 350px; height: 100%; background: #000; border-left: 1px solid var(--bio-high); z-index: 2000; transition: 0.4s; }
        #side-cart.open { right: 0; }
        .pay-link { display: block; width: 90%; margin: 10px auto; padding: 15px 0; text-align: center; font-size: 0.8rem; text-decoration: none; font-weight: bold; }
        #modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1000; display: none; background: rgba(0,0,0,0.95); backdrop-filter: blur(12px); align-items: center; justify-content: center; }
        .modal-content { width: 90%; max-width: 420px; background: #000; border: 2px solid var(--bio-high); position: relative; padding-bottom: 20px; }
        .close-modal { position: absolute; top: 10px; right: 15px; font-size: 1.8rem; color: var(--bio-high); cursor: pointer; }
    </style>
</head>
<body ondblclick="closeModal(); toggleCart(false)">

<div id="landing-overlay" onclick="enterSystem()">
    <div id="landing-prompt">SYSTEM READY // CLICK TO SYNC</div>
</div>

<canvas id="hurricaneCanvas"></canvas>

<header id="main-header">
    <h1>OLYMPIAN</h1>
    <div id="cart-trigger" onclick="toggleCart(true)" style="color:var(--bio-high); border:1px solid var(--bio-high); padding:8px 15px; font-size:0.8rem; cursor:pointer;">MANIFEST (0)</div>
</header>

<div id="store-grid"></div>

<div class="visual-stopper" id="stopper"></div>

<div class="control-footer" id="footer-controls">
    <button id="design-toggle" onclick="toggleHoloframe()">
        <div class="icon-circle"></div>
        <span>Custom Design</span>
    </button>

    <div class="slider-wrapper">
        <div id="sector-display">SYNCING...</div>
        <input type="range" id="sector-slider" class="sector-slider" min="1" max="1" value="1">
    </div>
</div>

<script>
// Logic remains consistent, with display updates for the new footer structure
let allProducts = [], cart = [], itemsPerPage = 24, selectedSize = null, activeProduct = null;

function enterSystem() {
    const overlay = document.getElementById('landing-overlay');
    document.getElementById('landing-prompt').innerText = "SYNCING MANIFEST...";
    overlay.style.opacity = '0';
    setTimeout(() => {
        overlay.style.display = 'none';
        const elements = ['main-header', 'store-grid', 'footer-controls'];
        elements.forEach(id => {
            const el = document.getElementById(id);
            el.style.display = (id === 'store-grid') ? 'grid' : 'flex';
            setTimeout(() => el.style.opacity = '1', 50);
        });
        fetchStore();
    }, 1000);
}

// ... (Rest of your fetchStore, renderGrid, and Three.js Hurricane logic remains the same)

async function fetchStore() {
    try {
        const res = await fetch('/api/artemis-2.js');
        const data = await res.json();
        if (data.products) { 
            allProducts = data.products; 
            setupNavigation();
            renderGrid(1); 
        }
    } catch (e) { document.getElementById('sector-display').innerText = "LINK SEVERED"; }
}

function setupNavigation() {
    const slider = document.getElementById('sector-slider');
    const display = document.getElementById('sector-display');
    const totalPages = Math.ceil(allProducts.length / itemsPerPage);
    slider.max = totalPages;
    display.innerText = `SECTOR 01 / ${totalPages.toString().padStart(2, '0')}`;
    slider.oninput = (e) => {
        display.innerText = `SECTOR ${e.target.value.padStart(2, '0')} / ${totalPages.toString().padStart(2, '0')}`;
        renderGrid(parseInt(e.target.value));
    };
}

function renderGrid(page) {
    const grid = document.getElementById('store-grid');
    const start = (page - 1) * itemsPerPage;
    const items = allProducts.slice(start, start + itemsPerPage);
    grid.innerHTML = items.map(p => `
        <div class="card" onclick="openModal('${p.name.replace(/'/g, "\\'")}', '${p.images[0]}')">
            <img src="${p.images[0]}" loading="lazy">
            <div class="grid-label">${p.name.split('Prompt:')[1] || 'OLYMPIAN'}</div>
        </div>`).join('');
    grid.scrollTop = 0;
}

function openModal(name, img) {
    activeProduct = { name, img }; selectedSize = null;
    document.getElementById('modal-title').innerText = name;
    document.getElementById('modal-img-container').innerHTML = `<img src="${img}" style="width:100%; mix-blend-mode:screen; filter:drop-shadow(0 0 15px var(--bio-high));">`;
    document.getElementById('modal-overlay').style.display = 'flex';
}

function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }
function toggleCart(show) { document.getElementById('side-cart').classList.toggle('open', show); }

// (Initialize Hurricane here as per your previous script)
let scene, camera, renderer, clock = new THREE.Clock();
// ... [Hurricane engine functions] ...
initHurricane();

function initHurricane() {
    scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x000606, 0.004);
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 3500);
    camera.position.set(0, 150, 450);
    const canvas = document.getElementById('hurricaneCanvas');
    renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x000000);
    // ... complete init ...
    animate();
}

function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
}
</script>
</body>
</html>
