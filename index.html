<!DOCTYPE html>
<html>
<head>
    <title>Store Diagnostic</title>
</head>
<body style="background: black; color: white; font-family: sans-serif; padding: 50px;">
    <h1>⚡️ Storefront Diagnostic</h1>
    <div id="debug-output" style="border: 2px solid #5a00ff; padding: 20px; border-radius: 10px;">
        Connecting to backend...
    </div>

    <script>
        async function testConnection() {
            const out = document.getElementById('debug-output');
            try {
                // This calls your backend brain
                const response = await fetch('/.netlify/functions/get-products');
                const data = await response.json();
                
                if (data.error) {
                    out.innerHTML = "<span style='color: red;'>Error from Printful:</span> " + data.error;
                } else {
                    out.innerHTML = "<span style='color: #00ff99;'>SUCCESS!</span> Found " + data.length + " products.<br><br>" + 
                                  JSON.stringify(data, null, 2);
                }
            } catch (err) {
                out.innerHTML = "<span style='color: red;'>FAILED:</span> Could not find the backend. Make sure get-products.js is deployed.";
            }
        }
        testConnection();
    </script>
</body>
</html>
